<!--Tam Tran-->
<!--Instructor: Mr. Lupoli-->
<!--Class: CMSC 331-->
<!--11/21/2014-->
<!--Project 1-->
<!--description: This is the head.html, this is a standardize page with cascading style sheet, layout, and scripts-->
<!--predefined for all pages in this directory-->
<!DOCTYPE html>

<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>Planes For Hire - Administration</title>
		
		<?php	
			include ('../link.php');
			$link = new Link($debug);
		?>
		
		<style>
			/* removes underline from links */
			a
			{
				text-decoration: none;
				color: #CC3300;
			}
			
			body
			{	
    			background-color: linen;
				font-family: Arial, Verdana;
				margin-top: 30px;
				margin-left: auto;
     			margin-right: auto;
				width: 1250px;
			}
			pre
			{
				font-family: Arial, Verdana;
			}
			
			.adminBasePanel
			{
				//background-color: #F3C1FF;
				margin-left: auto;
     			margin-right: auto;
				width: 1300px;
			}
			.adminHeaderPanel
			{
				//background-color: #FFD6D6;
				margin-left: auto;
     			margin-right: auto;
				width: 1300px;
			}
			.adminContentPanel
			{
				//background-color: #C2D6FF;
				margin-left: auto;
     			margin-right: auto;
				width: 1300px;
			}
			
			#textBox
			{
				font-family: Arial, Helvetica, sans-serif;
				font-size: 14px;
				width: 150px;
				height: 17px;
				float:right;
				vertical-align: top;
				border: 0px solid #0076a3; 
				border-right: solid 0px;
				border-top-left-radius: 3px 3px;
				border-bottom-left-radius: 3px 3px;
			}
			#searchButton
			{
				font-family: Arial, Helvetica, sans-serif;
				font-size: 13px;
				width: 50px;
				height: 19px;
				float: right;
				outline: none;
				cursor: pointer;
				text-align: center;
				text-decoration: none;
				color: #ffffff;
				vertical-align: top;
				border: solid 0px #0076a3;
				border-right: 0px;
				background: #008AB8;
				background: -webkit-gradient(linear, left top, left bottom, from(#00adee), to(#0078a5));
				background: -moz-linear-gradient(top,  #00adee,  #0078a5);
				border-top-right-radius: 3px 3px;
				border-bottom-right-radius: 3px 3px;
			}
			#searchButton:hover
			{
				text-decoration: none;
				background: #33A1C6;
				background: -webkit-gradient(linear, left top, left bottom, from(#0095cc), to(#00678e));
				background: -moz-linear-gradient(top,  #0095cc,  #00678e);
			}
			/* Fixes submit button height problem in Firefox */
			#searchButton::-moz-focus-inner
			{
				border: 0;
			}
			
			span
			{
				color: red;
			}
			.input
			{	
				background-color: #ffffff;
				border: 0px #a1a1a1 solid;
				border-radius: 4px;
				padding: 2px;
				float:right;
				height: 20px;
				width: 305px;
				font-size: 15px;
			}
			
		</style>
		
		<script>
			var adminContentPanel;
			var addPlaneHtmlContent = "<div style = \"width:35%\"><font size = \"3\"><br>" +
							 "Model Name<input id = \"model\" maxlength = \"30\" class = \"input\"/><br><br>" +
							 "Desire Location<select id = \"airportLocation\" style = \"width: 310px; float: right;\">" +
							 "<option value = ''></option></select><br><br>" +
							 "<a style = \"float:right\" href = \"javascript: addPlane('apply');\">Apply</a>" +
							 "<a style = \"float:right\" href = \"javascript: restoreAdminContentPanel();\">Cancel   </a>" +
							 "</font></div><br><br>";
			
			var addAirportHtmlContent = "<div style = \"width:35%\"><font size = \"3\"><br>" +
							 "Airport Name<input id = \"airport\" maxlength = \"90\" class = \"input\"/><br><br>" +
							 "Longitude<input id = \"lon\" maxlength = \"30\" class = \"input\"/><br><br>" +
							 "Latitude<input id = \"lat\" maxlength = \"30\" class = \"input\"/><br><br>" +
							 "<a style = \"float:right\" href = \"javascript: addAirport('apply');\">Apply</a>" +
							 "<a style = \"float:right\" href = \"javascript: restoreAdminContentPanel();\">Cancel   </a>" +
							 "</font></div><br><br>";
			
			function edit(email, field, value)
			{
				var msg = "Enter a new " + field + " value for member " + email + "\nThe current value is:";
				var newVal, intent = "updateField";
			
				if (value == "delete")
				{
					document.getElementById('adminContentPanel').innerHTML = "<div style = \"width:25%\"><font size = \"3\"><br>" +
																			 "Delete member " + email + " " + field + "?   This cannot be undone<br>" +
																			 "<a style = \"float:right;color:red;\" href = \"javascript: edit('" + email + "', '" + field + "', 'updateField');\">Delete</a>" +
																			 "<a style = \"float:right\" href = \"javascript: restoreAdminContentPanel();\">Cancel   </a>" +
																			 "<input id = \"fieldValue\" maxlength = \"90\" value = \"delete\" style = \"float:left; visibility:hidden;\" class = \"input\"/><br><br>" +
																			 "</font></div><br><br>";
				} else if (value == "suspend")
					newVal = "suspend";
				else if (value == "updateField")
				{
					if (document.getElementById('fieldValue').value == '')
					{
						restoreAdminContentPanel();
						return;
					}
					newVal = document.getElementById('fieldValue').value;
				} else if (field == "avatar")
					document.getElementById('adminContentPanel').innerHTML = "<div style = \"width:35%\"><font size = \"3\"><br>" +
																			 "Reset member " + email + " " + field + " ?<br>" +
																			 "<a style = \"float:right\" href = \"javascript: edit('" + email + "', '" + field + "', 'updateField');\">Apply</a>" +
																			 "<a style = \"float:right\" href = \"javascript: restoreAdminContentPanel();\">Cancel   </a>" +
																			 "<input id = \"fieldValue\" maxlength = \"90\" value = \"default.jpg\" style = \"float:left; visibility:hidden;\" class = \"input\"/><br><br>" +
																			 "</font></div><br><br>";
				else
					document.getElementById('adminContentPanel').innerHTML = "<div style = \"width:23.5%\"><font size = \"3\"><br>" +
																			 "Enter a new " + field + " for member " + email + "<br>" +
																			 "<input id = \"fieldValue\" maxlength = \"90\" placeholder = \"" + value + "\" style = \"float:left;\"class = \"input\"/><br><br>" +
																			 "<a style = \"float:right\" href = \"javascript: edit('" + email + "', '" + field + "', 'updateField');\">Apply</a>" +
																			 "<a style = \"float:right\" href = \"javascript: restoreAdminContentPanel();\">Cancel   </a>" +
																			 "</font></div><br><br>";
				
				if (newVal.length >= 1)
				{					
					if (window.XMLHttpRequest)
						xmlhttp = new XMLHttpRequest();
					else
						xmlhttp = new ActiveXObject ("Microsoft.XMLHTTP");
					
					xmlhttp.onreadystatechange = function()
					{
						if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
							document.getElementById('xmlRespondFeedback').innerHTML = xmlhttp.responseText;
					}
					
					xmlhttp.open ("post", "updateTable.php", "true");
					xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
					xmlhttp.send ("email=" + email + "&field=" + field + "&newVal=" + newVal + "&intent=" + intent);
				} else
					return;
			}
			
			function restoreAdminContentPanel()
			{
				document.getElementById('adminContentPanel').innerHTML = adminContentPanel;
			}
			
			function addPlane(intent) 
			{
				var data, intent, model, location;
				if (intent == '')
				{
					document.getElementById('adminContentPanel').innerHTML = addPlaneHtmlContent;
					intent = "populateAirportList";
					data = "intent=" + intent;
				}
				
				if (intent == 'apply')
				{
					model = document.getElementById('model').value;
					airportLocation = document.getElementById('airportLocation').value;
					intent = "addPlaneToTable";
					data = "intent=" + intent + "&model=" + model + "&airportLocation=" + airportLocation; 
					restoreAdminContentPanel();
				}
				
				if (data.length >= 1)
				{
					if (window.XMLHttpRequest)
						xmlhttp = new XMLHttpRequest();
					else
						xmlhttp = new ActiveXObject ("Microsoft.XMLHTTP");
					
					xmlhttp.onreadystatechange = function()
					{
						if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
							document.getElementById('airportLocation').innerHTML = xmlhttp.responseText;
					}
					
					xmlhttp.open ("post", "updateTable.php", "true");
					xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
					xmlhttp.send (data);
				}
			}
			
			function addAirport(intent)
			{
				var data, intent, airport, lon, lat;
				if (intent == '')
					document.getElementById('adminContentPanel').innerHTML = addAirportHtmlContent;
				
				if (intent == 'apply')
				{
					alert ("applying airport");
					airport = document.getElementById('airport').value;
					lon = document.getElementById('lon').value;
					lat = document.getElementById('lat').value;
					intent = "addNewAirportLocation";
					data = "intent=" + intent + "&airport=" + airport + "&lon=" + lon + "&lat=" + lat;
					restoreAdminContentPanel();
				}
				
				if (data.length >= 1)
				{
					if (window.XMLHttpRequest)
						xmlhttp = new XMLHttpRequest();
					else
						xmlhttp = new ActiveXObject ("Microsoft.XMLHTTP");
					
					xmlhttp.onreadystatechange = function()
					{
						if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
							document.getElementById('xmlRespondFeedback').innerHTML = xmlhttp.responseText;
					}
					
					xmlhttp.open ("post", "updateTable.php", "true");
					xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
					xmlhttp.send (data);
				}
			}
			
			function adminContentPanelBak ()
			{
				adminContentPanel = document.getElementById('adminContentPanel').innerHTML;
			}
		</script>
		
	</head>
	<body>
		<pre>